<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meta Ads Creative Generator</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Input Section -->
        <section id="creativeInputSection" class="hidden bg-white rounded-xl shadow-md p-6 mb-8">üöÄ Meta Ads Creative Generator</h1>
            <p>Cr√©ez des cr√©atives qui convertissent pour vos campagnes Facebook & Instagram</p>
        </header>

        <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Step Indicator -->
        <div class="mb-8">
            <div class="flex items-center justify-center space-x-4">
                <div id="step1-indicator" class="flex items-center space-x-2 px-4 py-2 rounded-full bg-purple-600 text-white font-semibold">
                    <span class="w-8 h-8 rounded-full bg-white text-purple-600 flex items-center justify-center font-bold">1</span>
                    <span>Configuration Marque</span>
                </div>
                <div class="w-16 h-1 bg-gray-300"></div>
                <div id="step2-indicator" class="flex items-center space-x-2 px-4 py-2 rounded-full bg-gray-300 text-gray-600 font-semibold">
                    <span class="w-8 h-8 rounded-full bg-white text-gray-600 flex items-center justify-center font-bold">2</span>
                    <span>G√©n√©ration Cr√©atives</span>
                </div>
            </div>
        </div>

        <!-- Step 1: Brand Configuration -->
        <section id="brandConfigSection" class="bg-white rounded-xl shadow-md p-6 mb-8">
            <h2 class="text-xl font-semibold mb-6 flex items-center">
                <i class="fas fa-globe mr-2 text-purple-600"></i>
                Configuration Automatique de la Marque
            </h2>
            
            <div class="mb-6">
                <p class="text-gray-600 mb-4">
                    Entrez l'URL de votre site web. Nous allons automatiquement extraire les couleurs, polices, images et contenu pour personnaliser vos cr√©atives.
                </p>
                
                <div class="flex gap-4">
                    <div class="flex-1">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-link mr-1"></i> URL du site web
                        </label>
                        <input type="url" id="websiteUrl" placeholder="https://www.exemple.com" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div class="flex items-end">
                        <button onclick="analyzeBrand()" class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition duration-200 transform hover:scale-105">
                            <i class="fas fa-search mr-2"></i> Analyser
                        </button>
                    </div>
                </div>
            </div>

            <!-- Brand Info Display -->
            <div id="brandInfoDisplay" class="hidden">
                <div class="border-t pt-6 mt-6">
                    <h3 class="font-semibold text-lg mb-4 flex items-center">
                        <i class="fas fa-palette mr-2 text-purple-600"></i>
                        Informations Extraites
                    </h3>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Brand Colors -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-palette mr-1"></i> Couleurs de la marque
                            </label>
                            <div id="brandColors" class="flex gap-2 mb-2">
                                <!-- Colors will be inserted here -->
                            </div>
                            <input type="text" id="brandColorsInput" placeholder="#667eea, #764ba2, ..." 
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                        </div>
                        
                        <!-- Brand Fonts -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-font mr-1"></i> Polices principales
                            </label>
                            <input type="text" id="brandFonts" placeholder="Ex: Inter, Roboto" 
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                        </div>
                        
                        <!-- Brand Name -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-trademark mr-1"></i> Nom de la marque
                            </label>
                            <input type="text" id="brandName" placeholder="Nom de votre marque" 
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                        </div>
                        
                        <!-- Brand Description -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-info-circle mr-1"></i> Description
                            </label>
                            <textarea id="brandDescription" rows="2" placeholder="Description de votre marque" 
                                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"></textarea>
                        </div>
                    </div>
                    
                    <!-- Brand Images -->
                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-images mr-1"></i> Images extraites du site
                        </label>
                        <div id="brandImages" class="grid grid-cols-4 gap-3">
                            <!-- Images will be inserted here -->
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-end">
                        <button onclick="goToCreativeGeneration()" class="bg-gradient-to-r from-green-600 to-teal-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-green-700 hover:to-teal-700 transition duration-200 transform hover:scale-105">
                            <i class="fas fa-arrow-right mr-2"></i> Continuer vers la g√©n√©ration
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 2: Input Section -->class="tab step-nav active" data-step="brand">
                <i class="fas fa-building"></i> Marque
            </button>
            <button class="tab step-nav" data-step="images">
                <i class="fas fa-images"></i> Images
            </button>
        <!-- Header -->
        <header class="app-header">
            <h1>üöÄ Meta Ads Creative Generator</h1>
            <p>Cr√©ez des cr√©atives qui convertissent pour vos campagnes Facebook & Instagram</p>
        </header>

        <!-- Navigation -->
        <div class="tabs">
            <button class="tab step-nav active" data-step="brand">
                <i class="fas fa-building"></i> Marque
            </button>
            <button class="tab step-nav" data-step="images">
                <i class="fas fa-images"></i> Images
            </button>
            <button class="tab step-nav" data-step="content">
                <i class="fas fa-edit"></i> Contenu
            </button>
            <button class="tab step-nav" data-step="templates">
                <i class="fas fa-layer-group"></i> Templates
            </button>
            <button class="tab step-nav" data-step="preview">
                <i class="fas fa-eye"></i> Pr√©visualisation
            </button>
        </div>

        <!-- SECTION 1: Brand Setup -->
        <section id="brandSection" class="step-section">
            <h2><i class="fas fa-building"></i> Configuration de la Marque</h2>
            
            <div class="btn-group mb-4">
                <button id="scrapeWebsite" class="btn btn-secondary">
                    <i class="fas fa-download"></i> Scraper depuis un site web
                </button>
                <div id="savedBrands" style="display:inline-block;margin-left:20px;"></div>
            </div>
            
            <form id="brandForm" class="form-grid">
                <div class="form-group">
                    <label>Nom de la marque *</label>
                    <input type="text" id="brandName" name="brandName" required>
                </div>
                
                <div class="form-group">
                    <label>Site web</label>
                    <input type="url" id="websiteUrl" name="websiteUrl" placeholder="https://example.com">
                </div>
                
                <div class="form-group">
                    <label>Industrie</label>
                    <select id="industry" name="industry">
                        <option value="">S√©lectionner</option>
                        <option value="ecommerce">E-commerce</option>
                        <option value="saas">SaaS</option>
                        <option value="fashion">Mode</option>
                        <option value="food">Alimentation</option>
                        <option value="tech">Technologie</option>
                        <option value="health">Sant√©</option>
                        <option value="education">√âducation</option>
                        <option value="services">Services</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Audience cible</label>
                    <input type="text" id="targetAudience" name="targetAudience" placeholder="Ex: Femmes 25-35 ans">
                </div>
                
                <div class="form-group" style="grid-column:span 2;">
                    <label>Couleurs de la marque</label>
                    <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:15px;">
                        <div>
                            <label style="font-size:12px;">Primaire</label>
                            <input type="color" id="primaryColor" name="primaryColor" value="#1877F2">
                        </div>
                        <div>
                            <label style="font-size:12px;">Secondaire</label>
                            <input type="color" id="secondaryColor" name="secondaryColor" value="#42B883">
                        </div>
                        <div>
                            <label style="font-size:12px;">Accent</label>
                            <input type="color" id="accentColor" name="accentColor" value="#667eea">
                        </div>
                        <div>
                            <label style="font-size:12px;">Texte</label>
                            <input type="color" id="textColor" name="textColor" value="#1C1E21">
                        </div>
                        <div>
                            <label style="font-size:12px;">Fond</label>
                            <input type="color" id="backgroundColor" name="backgroundColor" value="#FFFFFF">
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Police de titre</label>
                    <input type="text" id="headingFont" name="headingFont" value="Inter">
                </div>
                
                <div class="form-group">
                    <label>Police de texte</label>
                    <input type="text" id="bodyFont" name="bodyFont" value="Inter">
                </div>
                
                <div class="form-group" style="grid-column:span 2;">
                    <label>Call-to-Actions (s√©par√©s par des virgules)</label>
                    <input type="text" id="ctas" name="ctas" placeholder="En savoir plus, Acheter maintenant, D√©couvrir">
                </div>
                
                <div class="form-group" style="grid-column:span 2;">
                    <label>Personnalit√© de la marque</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="personality" value="moderne"> Moderne
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="personality" value="fun"> Fun
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="personality" value="serieux"> S√©rieux
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="personality" value="luxe"> Luxe
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="personality" value="eco"> √âcologique
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Utiliser des d√©grad√©s</label>
                    <input type="checkbox" id="useGradients" name="useGradients">
                </div>
                
                <div class="form-group">
                    <label>Rayon des bordures</label>
                    <select id="borderRadius" name="borderRadius">
                        <option value="none">Aucun</option>
                        <option value="small">Petit</option>
                        <option value="medium" selected>Moyen</option>
                        <option value="large">Grand</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Intensit√© des ombres</label>
                    <select id="shadowIntensity" name="shadowIntensity">
                        <option value="none">Aucune</option>
                        <option value="light" selected>L√©g√®re</option>
                        <option value="medium">Moyenne</option>
                        <option value="strong">Forte</option>
                    </select>
                </div>
            </form>
            
            <div class="btn-group">
                <button type="submit" form="brandForm" class="btn btn-primary">
                    <i class="fas fa-save"></i> Sauvegarder et continuer
                </button>
            </div>
        </section>

        <!-- SECTION 2: Images -->
        <section id="imagesSection" class="step-section hidden">
            <h2><i class="fas fa-images"></i> Gestion des Images</h2>
            
            <div class="form-grid">
                <div>
                    <h3>Upload d'images</h3>
                    <div id="uploadZone" class="upload-zone">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Glissez-d√©posez ou cliquez pour t√©l√©charger</p>
                        <p style="font-size:12px;opacity:0.7;">JPG, PNG, GIF, WebP (Max: 5MB)</p>
                    </div>
                </div>
                
                <div>
                    <h3>G√©n√©ration IA</h3>
                    <button id="generateAiImage" class="btn btn-primary" style="width:100%;">
                        <i class="fas fa-magic"></i> G√©n√©rer avec l'IA
                    </button>
                    <div id="aiPromptSuggestions" style="margin-top:20px;">
                        <!-- Suggestions will be added here -->
                    </div>
                </div>
            </div>
            
            <div class="image-gallery" id="imageGallery">
                <!-- Images will be displayed here -->
            </div>
            
            <div id="selectedImagePreview" style="margin-top:20px;text-align:center;">
                <!-- Selected image preview -->
            </div>
        </section>

        <!-- SECTION 3: Content -->
        <section id="contentSection" class="step-section hidden">
            <h2><i class="fas fa-edit"></i> Contenu des Cr√©atives</h2>
            
            <form id="contentForm" class="form-grid">
                <div class="form-group">
                    <label>Titre principal *</label>
                    <input type="text" name="headline" placeholder="Ex: D√©couvrez notre nouvelle collection">
                </div>
                
                <div class="form-group">
                    <label>Description</label>
                    <textarea name="description" rows="3" placeholder="Description accrocheuse..."></textarea>
                </div>
                
                <div class="form-group">
                    <label>Call-to-Action</label>
                    <input type="text" name="cta" placeholder="Ex: Acheter maintenant">
                </div>
                
                <div class="form-group">
                    <label>Nom du produit</label>
                    <input type="text" name="productName" placeholder="Ex: Chaussures Sport Pro">
                </div>
                
                <div class="form-group">
                    <label>Prix</label>
                    <input type="text" name="price" placeholder="Ex: 49,99‚Ç¨">
                </div>
                
                <div class="form-group">
                    <label>Ancien prix</label>
                    <input type="text" name="oldPrice" placeholder="Ex: 79,99‚Ç¨">
                </div>
                
                <div class="form-group">
                    <label>R√©duction</label>
                    <input type="text" name="discount" placeholder="Ex: -40%">
                </div>
                
                <div class="form-group">
                    <label>Urgence</label>
                    <input type="text" name="urgency" placeholder="Ex: Offre limit√©e !">
                </div>
                
                <div class="form-group">
                    <label>Badge</label>
                    <input type="text" name="badge" placeholder="Ex: Nouveau">
                </div>
                
                <div class="form-group" style="grid-column:span 2;">
                    <label>T√©moignage client</label>
                    <textarea name="testimonial" rows="2" placeholder="Ce produit a chang√© ma vie !"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Nom du client</label>
                    <input type="text" name="customerName" placeholder="Ex: Marie Dupont">
                </div>
                
                <div class="form-group">
                    <label>Titre du client</label>
                    <input type="text" name="customerTitle" placeholder="Ex: Cliente satisfaite">
                </div>
            </form>
        </section>

        <!-- SECTION 4: Templates -->
        <section id="templatesSection" class="step-section hidden">
            <h2><i class="fas fa-layer-group"></i> S√©lection des Templates</h2>
            
            <div class="tabs">
                <button class="tab active" onclick="showTemplateFormat('landscape')">
                    <i class="fas fa-desktop"></i> Paysage (1200x628)
                </button>
                <button class="tab" onclick="showTemplateFormat('square')">
                    <i class="fas fa-square"></i> Carr√© (1080x1080)
                </button>
                <button class="tab" onclick="showTemplateFormat('story')">
                    <i class="fas fa-mobile-alt"></i> Story (1080x1920)
                </button>
            </div>
            
            <div id="landscapeTemplates" class="template-grid">
                <!-- Templates will be loaded here -->
            </div>
            
            <div id="squareTemplates" class="template-grid hidden">
                <!-- Templates will be loaded here -->
            </div>
            
            <div id="storyTemplates" class="template-grid hidden">
                <!-- Templates will be loaded here -->
            </div>
            
            <div class="btn-group mt-6">
                <button id="generateCreatives" class="btn btn-primary">
                    <i class="fas fa-magic"></i> G√©n√©rer les Cr√©atives
                </button>
            </div>
        </section>

        <!-- SECTION 5: Preview -->
        <section id="previewSection" class="step-section hidden">
            <h2><i class="fas fa-eye"></i> Pr√©visualisation et Export</h2>
            
            <div class="preview-dashboard">
                <div class="format-previews">
                    <!-- Landscape Preview -->
                    <div class="preview-container">
                        <h3>
                            Format Paysage
                            <span class="format-badge">1200x628</span>
                        </h3>
                        <div class="preview-frame landscape" id="preview-landscape">
                            <!-- Preview will be loaded here -->
                        </div>
                        <div class="validation-status" id="validation-landscape"></div>
                    </div>
                    
                    <!-- Square Preview -->
                    <div class="preview-container">
                        <h3>
                            Format Carr√©
                            <span class="format-badge">1080x1080</span>
                        </h3>
                        <div class="preview-frame square" id="preview-square">
                            <!-- Preview will be loaded here -->
                        </div>
                        <div class="validation-status" id="validation-square"></div>
                    </div>
                    
                    <!-- Story Preview -->
                    <div class="preview-container">
                        <h3>
                            Format Story
                            <span class="format-badge">1080x1920</span>
                        </h3>
                        <div class="preview-frame story" id="preview-story">
                            <!-- Preview will be loaded here -->
                        </div>
                        <div class="validation-status" id="validation-story"></div>
                    </div>
                </div>
                
                <div class="btn-group">
                    <button id="exportAll" class="btn btn-success">
                        <i class="fas fa-download"></i> Exporter tout
                    </button>
                    <button onclick="app.generateVariation()" class="btn btn-secondary">
                        <i class="fas fa-sync"></i> G√©n√©rer variation
                    </button>
                    <button onclick="app.saveToLibrary()" class="btn btn-secondary">
                        <i class="fas fa-save"></i> Sauvegarder
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:9999;align-items:center;justify-content:center;">
        <div class="loading">
            <div class="spinner"></div>
            <p style="color:white;margin-top:20px;">Chargement...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/brandManager.js"></script>
    <script src="js/templates.js"></script>
    <script src="js/imageHandler.js"></script>
    <script src="js/creativeGenerator.js"></script>
    <script src="js/app.js"></script>
    
    <script>
        // Helper functions for template format switching
        function showTemplateFormat(format) {
            document.querySelectorAll('.template-grid').forEach(grid => {
                grid.classList.add('hidden');
            });
            document.getElementById(`${format}Templates`)?.classList.remove('hidden');
            
            document.querySelectorAll('#templatesSection .tabs .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
